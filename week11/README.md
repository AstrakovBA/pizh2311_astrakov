# Лабораторная работа 3. Модель песчаной кучи
---------------
Реализация упрощенной модели песчаной кучи (Abelian sandpile model) с возможностью сохранения состояний в BMP файлы.

## Особенности реализации
- Стандарт языка: Программа использует C++17 для работы с файловой системой (std::filesystem)
- Реализована проверка открытия файлов и обработка исключений при неверных входных данных
- Максимальный размер сетки ограничен uint16_t (65535)
- Количество песчинок в ячейке ограничено uint64_t

## Основные функции и классы

**Класс SandpileModel:**
- load_initial_state() - загрузка начального состояния из TSV-файла
- iterate() - выполнение одной итерации модели
- is_stable() - проверка стабильности системы
- save_to_bmp() - сохранение текущего состояния в BMP файл

**Вспомогательные функции:**
- get_color() - преобразование количества песчинок в цвет пикселя
- parse_arguments() - обработка аргументов командной строки

**Реализация BMP:**
- Ручная реализация без внешних библиотек
- Поддержка 24-битного формата без сжатия
- Правильное выравнивание строк по 4 байта

**Логика модели:**
- Детерминированное поведение (состояние зависит только от предыдущего)
- Параллельное обновление всех ячеек (используется временная копия сетки)
- Обработка граничных условий (песчинки "пропадают" за границами)

**Структура данных:**
- Сетка представлена вектором векторов (std::vector<std::vector<uint64_t>>)
- Цвета хранятся в unordered_map для быстрого доступа
- Параметры модели передаются через аргументы командной строки

**Особенности работы с файлами:**
- TSV-файл читается построчно с проверкой формата
- BMP файлы создаются с правильными заголовками
- Автоматическое создание выходной директории при необходимости

## Использование
Программа принимает следующие аргументы командной строки:

' ' '
-l, --length    Длина сетки (по умолчанию: 10)
-w, --width     Ширина сетки (по умолчанию: 10)
-i, --input     Путь к TSV-файлу с начальными данными (по умолчанию: input.tsv)
-o, --output    Директория для сохранения BMP файлов (по умолчанию: output)
-m, --max-iter  Максимальное количество итераций (по умолчанию: 100)
-f, --freq      Частота сохранения состояний (0 - только конечное состояние) (по умолчанию: 1)
' ' '

Входной файл должен содержать строки в формате:

' ' '
x-координата<TAB>y-координата<TAB>количество песчинок
' ' '

Программа сохраняет состояния модели в BMP файлы с именами вида:

' ' '
state_<номер_итерации>.bmp
' ' '

Цвета пикселей соответствуют количеству песчинок:
- 0: белый
- 1: зеленый
- 2: фиолетовый
- 3: желтый
- Больше 3: чёрный
